<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>无名空间</title><link>http://xiehao.github.io/</link><description>Recent content on 无名空间</description><generator>Hugo -- gohugo.io</generator><lastBuildDate>Thu, 19 Jan 2023 14:57:00 +0800</lastBuildDate><atom:link href="http://xiehao.github.io/index.xml" rel="self" type="application/rss+xml"/><item><title>在Docker中搭建JupyterHub服务器</title><link>http://xiehao.github.io/blogs/2023-01-19-docker-jupyterhub/</link><pubDate>Thu, 19 Jan 2023 14:57:00 +0800</pubDate><guid>http://xiehao.github.io/blogs/2023-01-19-docker-jupyterhub/</guid><description>功能需求 因团队项目需要，需组建供多人同时使用的深度学习服务器一台，计划支持以下功能：
支持通过浏览器访问服务器 支持多用户同时访问，且互不干扰 支持在用户间通过共享目录合作开发 支持用户使用服务器上的独立显卡 核心思想 在Docker中开启JupyterHub服务器 由于在本机配置环境时对环境破坏较大，且不易维护，故可采用在Docker镜像中部署 传统的Jupyter Notebook乃至JupyterLab仅支持单用户访问，不满足需求，故采用支持多人访问的JupyterHub作为服务器 在服务器中为每个用户开启一个JupyterLab容器 在JupyterHub平台上为每个用户单独开启一个Docker容器 在新开启的容器中开启一个JupyterLab服务，以支持单人操作 所需软件 理论上可在任何支持Docker的软件平台上部署，本文在Manjaro Linux操作系统上部署，可通过yay安装：
git：用于版本控制 docker与docker-compose：用于承载平台服务 nvidia与nvidia-container-toolkit：用于驱动显卡并被Docker容器识别 主要步骤 克隆仓库 jupyterhub-deploy-docker至本地 git clone https://github.com/jupyterhub/jupyterhub-deploy-docker.git 自定义少量配置 修改每个用户启动jupyter notebook所用镜像为cschranz/gpu-jupyter以支持nvidia显卡 在docker-compose.yaml文件中，services的environment下将DOCKER_NOTEBOOK_IMAGE的值修改为cschranz/gpu-jupyter:latest： # JupyterHub will spawn this Notebook image for users DOCKER_NOTEBOOK_IMAGE: cschranz/gpu-jupyter:latest 设置多用户均可访问的共享文件夹/home/jovyan/shared，可在其内实现多人合作开发 在jupyterhub_config.py文件中，修改变量c.DockerSpawner.volumns的值： # Mount the real user&amp;#39;s Docker volume on the host to the notebook user&amp;#39;s # notebook directory in the container c.DockerSpawner.volumes = { &amp;#39;jupyterhub-user-{username}&amp;#39;: notebook_dir, &amp;#39;jupyterhub-shared&amp;#39;: { &amp;#39;bind&amp;#39;: &amp;#39;/home/jovyan/shared&amp;#39;, &amp;#39;mode&amp;#39;: &amp;#39;rw&amp;#39; } } 令单用户容器可访问主机显卡 在jupyterhub_config.</description></item><item><title>关于鄙站</title><link>http://xiehao.github.io/about/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>http://xiehao.github.io/about/</guid><description> 难于命名，故曰无名 分享、记录、整理、回顾</description></item></channel></rss>